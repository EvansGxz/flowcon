{
  "id": "route-intent",
  "version": 1,
  "start": "t1",
  "nodes": [
    {
      "id": "t1",
      "type": "trigger.manual",
      "typeVersion": 1,
      "label": "Manual Trigger",
      "config": {
        "message": "reporte ventas"
      },
      "ui": {
        "x": 100,
        "y": 200
      }
    },
    {
      "id": "a1",
      "type": "agent.core",
      "typeVersion": 1,
      "label": "Agent Core",
      "config": {
        "strategy": "reactive",
        "instructions": "If message includes 'reporte' return intent=report else intent=chat"
      },
      "ui": {
        "x": 300,
        "y": 200
      }
    },
    {
      "id": "c1",
      "type": "condition.expr",
      "typeVersion": 1,
      "label": "Condition Expression",
      "config": {
        "engine": "jexl",
        "rules": [
          {
            "if": "intent == 'report'",
            "to": "r_report"
          },
          {
            "if": "intent == 'chat'",
            "to": "r_chat"
          }
        ]
      },
      "ui": {
        "x": 500,
        "y": 200
      }
    },
    {
      "id": "r_report",
      "type": "response.chat",
      "typeVersion": 1,
      "label": "Response Report",
      "config": {
        "format": "text",
        "template": "OK, generar√© el reporte."
      },
      "ui": {
        "x": 700,
        "y": 100
      }
    },
    {
      "id": "r_chat",
      "type": "response.chat",
      "typeVersion": 1,
      "label": "Response Chat",
      "config": {
        "format": "text",
        "template": "OK, conversemos."
      },
      "ui": {
        "x": 700,
        "y": 300
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "t1",
      "target": "a1"
    },
    {
      "id": "e2",
      "source": "a1",
      "target": "c1"
    },
    {
      "id": "e3",
      "source": "c1",
      "target": "r_report",
      "label": "intent == 'report'"
    },
    {
      "id": "e4",
      "source": "c1",
      "target": "r_chat",
      "label": "intent == 'chat'"
    }
  ]
}
